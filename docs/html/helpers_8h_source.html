<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<LINK href="doxygen.css" rel="stylesheet" type="text/css">
<title>MazBotV4 Helpers API</title>
</head>
<body>
<h1>MazBotV4 Helpers API</h1>
<b>
<ul>
<li>Cexplode</li>
<li>Atomic oerations</li>
<li>Linked list</li>
</ul>
</b>
<p>
<b>Copyright</b><br>
<pre>
/* **********************************************************************/
/*                                                                      *
 *      Implementation of php's explode written in C                    *
 *      Written by  Maz (2008)                                          *
 *      Added Atomic operations for x86 architecture and                *
 *      Linked list implementation.                                     *
 *      Written by  Maz (2009-2010)                                     *
 *      http://maz-programmersdiary.blogspot.com/                       *
 *                                                                      *
 *      You're free to use this piece of code.                          *
 *      You can also modify it freely, but if you                       *
 *      improve this, you must write the improved code                  *
 *      in comments at:                                                 *
 *      http://maz-programmersdiary.blogspot.com/                       *
 *      or at:                                                          *
 *      http://c-ohjelmoijanajatuksia.blogspot.com/                     *
 *      or mail the corrected version to me at                          *
 *      Mazziesaccount@gmail.com                                        *
 *                                                                      *
 *      Revision History:                                               *
 *                                                                      *
 *      - 0.0.6 15.08.2009/Maz  Fixed atomic CAS                        *
 *      - 0.0.5 11.08.2009/Maz  Added Cexplode_free_allButPieces        *
 *      - 0.0.4 11.08.2009/Maz  Added atomic ops and                    *
 *                              mbot_ll                                 *
 *      -v0.0.3 31.07.2009/Maz  Added Cexplode_concat                   *
 *                              (untested)                              *
 *      -v0.0.2 21.07.2009/Maz  Some additions for better               *
 *                              usability in MazBotV4                   *
 *      -v0.0.1 16.09.2008/Maz                                          *
 *                                                                      */
/* ******************************************************************** */
</pre>
<p>

<!-- Generated by Doxygen 1.6.1 -->
<h1>helpers.h</h1><a href="helpers_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00002"></a>00002 <span class="comment">/* **********************************************************************/</span>
<a name="l00003"></a>00003 <span class="comment">/*                                                                      *</span>
<a name="l00004"></a>00004 <span class="comment"> *      Implementation of php&apos;s explode written in C                    *</span>
<a name="l00005"></a>00005 <span class="comment"> *      Written by  Maz (2008)                                          *</span>
<a name="l00006"></a>00006 <span class="comment"> *      http://maz-programmersdiary.blogspot.com/                       *</span>
<a name="l00007"></a>00007 <span class="comment"> *                                                                      *</span>
<a name="l00008"></a>00008 <span class="comment"> *      You&apos;re free to use this piece of code.                          *</span>
<a name="l00009"></a>00009 <span class="comment"> *      You can also modify it freely, but if you                       *</span>
<a name="l00010"></a>00010 <span class="comment"> *      improve this, you must write the improved code                  *</span>
<a name="l00011"></a>00011 <span class="comment"> *      in comments at:                                                 *</span>
<a name="l00012"></a>00012 <span class="comment"> *      http://maz-programmersdiary.blogspot.com/                       *</span>
<a name="l00013"></a>00013 <span class="comment"> *      or at:                                                          *</span>
<a name="l00014"></a>00014 <span class="comment"> *      http://c-ohjelmoijanajatuksia.blogspot.com/                     *</span>
<a name="l00015"></a>00015 <span class="comment"> *      or mail the corrected version to me at                          *</span>
<a name="l00016"></a>00016 <span class="comment"> *      Mazziesaccount@gmail.com                                        *</span>
<a name="l00017"></a>00017 <span class="comment"> *                                                                      *</span>
<a name="l00018"></a>00018 <span class="comment"> *      Revision History:                                               *</span>
<a name="l00019"></a>00019 <span class="comment"> *                                                                      *</span>
<a name="l00020"></a>00020 <span class="comment"> *      - 0.0.6 15.08.2009/Maz  Fixed atomic CAS                        *</span>
<a name="l00021"></a>00021 <span class="comment"> *      - 0.0.5 11.08.2009/Maz  Added Cexplode_free_allButPieces        *</span>
<a name="l00022"></a>00022 <span class="comment"> *      - 0.0.4 11.08.2009/Maz  Added atomic ops and                    *</span>
<a name="l00023"></a>00023 <span class="comment"> *                              mbot_ll                                 *</span>
<a name="l00024"></a>00024 <span class="comment"> *      -v0.0.3 31.07.2009/Maz  Added Cexplode_concat                   *</span>
<a name="l00025"></a>00025 <span class="comment"> *                              (untested)                              *</span>
<a name="l00026"></a>00026 <span class="comment"> *      -v0.0.2 21.07.2009/Maz  Some additions for better               *</span>
<a name="l00027"></a>00027 <span class="comment"> *                              usability in MazBotV4                   *</span>
<a name="l00028"></a>00028 <span class="comment"> *      -v0.0.1 16.09.2008/Maz                                          *</span>
<a name="l00029"></a>00029 <span class="comment"> *                                                                      */</span>
<a name="l00030"></a>00030 <span class="comment">/* ******************************************************************** */</span>
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="preprocessor">#ifndef HELPERS_H</span>
<a name="l00033"></a>00033 <span class="preprocessor"></span><span class="preprocessor">#define HELPERS_H</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span>
<a name="l00035"></a>00035 <span class="comment">/* Some Cexplode calls support using this special item define */</span>
<a name="l00036"></a><a class="code" href="helpers_8h.html#abfdc88c318ac17df371af7b475163783">00036</a> <span class="preprocessor">#define CEXPLODE_LAST_ITEM 0xFFFFFFFF</span>
<a name="l00037"></a>00037 <span class="preprocessor"></span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00039"></a>00039 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00040"></a>00040 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00041"></a>00041 <span class="preprocessor">#include &lt;semaphore.h&gt;</span>
<a name="l00042"></a>00042 
<a name="l00046"></a><a class="code" href="structMbotAtomic32.html">00046</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structMbotAtomic32.html" title="Struct for 32bit wide integer type used in atomic operations.">MbotAtomic32</a> 
<a name="l00047"></a>00047 {
<a name="l00048"></a><a class="code" href="structMbotAtomic32.html#af20004ad939f9f9ec5987e2a0bb11525">00048</a>     <span class="keyword">volatile</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="structMbotAtomic32.html#af20004ad939f9f9ec5987e2a0bb11525">value</a>;
<a name="l00049"></a><a class="code" href="structMbotAtomic32.html#a57e5f989454185402d689672f370a749">00049</a>     sem_t <a class="code" href="structMbotAtomic32.html#a57e5f989454185402d689672f370a749" title="If non x86 arch is used, these atomic ops are dummies using semaphore.">sem</a>;      
<a name="l00050"></a>00050 }<a class="code" href="structMbotAtomic32.html" title="Struct for 32bit wide integer type used in atomic operations.">MbotAtomic32</a>;
<a name="l00051"></a>00051 
<a name="l00052"></a>00052 
<a name="l00056"></a><a class="code" href="structCexplodeStrings.html">00056</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structCexplodeStrings.html" title="Struct for Cexplode object.">CexplodeStrings</a>
<a name="l00057"></a>00057 {
<a name="l00058"></a><a class="code" href="structCexplodeStrings.html#acc09a340188aa980b12384c6aaeb619b">00058</a>     <span class="keywordtype">int</span> <a class="code" href="structCexplodeStrings.html#acc09a340188aa980b12384c6aaeb619b">amnt</a>;
<a name="l00059"></a><a class="code" href="structCexplodeStrings.html#a00cbca77782f1d0a06611d6c6ea7f545">00059</a>     <span class="keywordtype">char</span> **<a class="code" href="structCexplodeStrings.html#a00cbca77782f1d0a06611d6c6ea7f545">strings</a>;
<a name="l00060"></a><a class="code" href="structCexplodeStrings.html#a8038fdec34026e3dfb00bc9324fb0331">00060</a>     <span class="keywordtype">char</span> *<a class="code" href="structCexplodeStrings.html#a8038fdec34026e3dfb00bc9324fb0331">separator</a>;
<a name="l00061"></a><a class="code" href="structCexplodeStrings.html#ab55c61027a3737d4bb906bef2a61794b">00061</a>     <span class="keywordtype">int</span> <a class="code" href="structCexplodeStrings.html#ab55c61027a3737d4bb906bef2a61794b">sepwasatend</a>;
<a name="l00062"></a><a class="code" href="structCexplodeStrings.html#a4ba004e7bf4de5cf5280379693180d3a">00062</a>     <span class="keywordtype">int</span> <a class="code" href="structCexplodeStrings.html#a4ba004e7bf4de5cf5280379693180d3a">startedWdelim</a>;
<a name="l00063"></a><a class="code" href="structCexplodeStrings.html#a750b5d744c39a06bfb13e6eb010e35d0">00063</a>     <span class="keywordtype">int</span> <a class="code" href="structCexplodeStrings.html#a750b5d744c39a06bfb13e6eb010e35d0">index</a>;
<a name="l00064"></a>00064 }<a class="code" href="structCexplodeStrings.html" title="Struct for Cexplode object.">CexplodeStrings</a>;
<a name="l00065"></a>00065 
<a name="l00069"></a><a class="code" href="helpers_8h.html#a56c8f0f14ff2d468fabe0d3f568181df">00069</a> <span class="keyword">typedef</span> <span class="keyword">enum</span> <a class="code" href="helpers_8h.html#a56c8f0f14ff2d468fabe0d3f568181df" title="enumeration for Cexplodei&amp;#39;s error return values">ECexplodeRet</a>
<a name="l00070"></a>00070 {
<a name="l00071"></a><a class="code" href="helpers_8h.html#a56c8f0f14ff2d468fabe0d3f568181dfaaa011f9fda77271b2b6da4802a542aab">00071</a>     <a class="code" href="helpers_8h.html#a56c8f0f14ff2d468fabe0d3f568181dfaaa011f9fda77271b2b6da4802a542aab">ECexplodeRet_InternalFailure</a>    = -666,
<a name="l00072"></a><a class="code" href="helpers_8h.html#a56c8f0f14ff2d468fabe0d3f568181dfaa2ae017306e779c0558ea650bbc9fc78">00072</a>     <a class="code" href="helpers_8h.html#a56c8f0f14ff2d468fabe0d3f568181dfaa2ae017306e779c0558ea650bbc9fc78">ECexplodeRet_InvalidParams</a>         = -667
<a name="l00073"></a>00073 }<a class="code" href="helpers_8h.html#a56c8f0f14ff2d468fabe0d3f568181df" title="enumeration for Cexplodei&amp;#39;s error return values">ECexplodeRet</a>;
<a name="l00074"></a>00074 
<a name="l00085"></a>00085 <span class="keywordtype">int</span> <a class="code" href="helpers_8h.html#a64d6e9e5a93f8eab6d85501b9b50f5b4" title="Removes the previously returned piece.">Cexplode_removeCurrent</a>(<a class="code" href="structCexplodeStrings.html" title="Struct for Cexplode object.">CexplodeStrings</a> *exp_obj);
<a name="l00086"></a>00086 
<a name="l00098"></a>00098 <span class="keywordtype">char</span> *<a class="code" href="helpers_8h.html#a0c82e1b2630b7538bc756ffc7eaaeb9e" title="Removes Nth piece from cexplode Must not be called before calling Cexplode If removed...">Cexplode_removeNth</a>(<span class="keywordtype">int</span> nro,<a class="code" href="structCexplodeStrings.html" title="Struct for Cexplode object.">CexplodeStrings</a> *exp_obj);
<a name="l00099"></a>00099 
<a name="l00108"></a>00108 <span class="keywordtype">int</span> <a class="code" href="helpers_8h.html#a87aaf2c06db8e04dab417d61ced26c87" title="Get the amount of pieces in exploded object Must not be called before calling Cexplode...">Cexplode_getAmnt</a>(<a class="code" href="structCexplodeStrings.html" title="Struct for Cexplode object.">CexplodeStrings</a> exp_obj);
<a name="l00109"></a>00109 
<a name="l00122"></a>00122 <span class="keywordtype">int</span> <a class="code" href="helpers_8h.html#a1c975295ecd9dc44ad145b912924d09f" title="Explodes string to pieces according to delimiter. Result is stored in exp_obj and...">Cexplode</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keywordtype">string</span>,<span class="keyword">const</span> <span class="keywordtype">char</span> *delim, <a class="code" href="structCexplodeStrings.html" title="Struct for Cexplode object.">CexplodeStrings</a> *exp_obj );
<a name="l00123"></a>00123 
<a name="l00132"></a>00132 <span class="keywordtype">int</span> <a class="code" href="helpers_8h.html#a3bde5412faee7e4bd72fb176e9512753" title="Peeks if there&amp;#39;s another result in exp_obj. Must not be called before calling...">Cexplode_nextexists</a>(<a class="code" href="structCexplodeStrings.html" title="Struct for Cexplode object.">CexplodeStrings</a> exp_obj);
<a name="l00133"></a>00133 
<a name="l00143"></a>00143 <span class="keywordtype">char</span> *<a class="code" href="helpers_8h.html#a70206fa6bc4d5b81df9368a8bcf04d6a" title="Retrieve&amp;#39;s Nth exploded piece - first is first (index starts from 1, not from...">Cexplode_getNth</a>(<span class="keywordtype">int</span> index,<a class="code" href="structCexplodeStrings.html" title="Struct for Cexplode object.">CexplodeStrings</a> *exp_obj);
<a name="l00144"></a>00144 
<a name="l00152"></a>00152 <span class="keywordtype">char</span> *<a class="code" href="helpers_8h.html#ad5313efc1607b587d5f50f9e7da53ac6" title="Get&amp;#39;s the first exploded piece. Same as Cexplode_getNth(1,*exp_obj);.">Cexplode_getfirst</a>(<a class="code" href="structCexplodeStrings.html" title="Struct for Cexplode object.">CexplodeStrings</a> *exp_obj);
<a name="l00153"></a>00153 
<a name="l00161"></a>00161 <span class="keywordtype">char</span> *<a class="code" href="helpers_8h.html#ad5a89f298b77859208dd3dfa89ed52bb" title="Get&amp;#39;s next piece. Returns NULL if no more pieces are around.">Cexplode_getnext</a>(<a class="code" href="structCexplodeStrings.html" title="Struct for Cexplode object.">CexplodeStrings</a> *exp_obj);
<a name="l00169"></a>00169 <span class="keywordtype">char</span> *<a class="code" href="helpers_8h.html#ad26d2c6306f4e0bf10087eb2eee11f00" title="Gets last exploded piece.">Cexplode_getlast</a>(<a class="code" href="structCexplodeStrings.html" title="Struct for Cexplode object.">CexplodeStrings</a> *exp_obj);
<a name="l00170"></a>00170 
<a name="l00178"></a>00178 <span class="keywordtype">void</span> <a class="code" href="helpers_8h.html#aa24158d63e276373bcbbfa90ab6fb146" title="Frees resources allocated by call to Cexplode() - BEWARE frees also splitted pieces...">Cexplode_free</a>(<a class="code" href="structCexplodeStrings.html" title="Struct for Cexplode object.">CexplodeStrings</a> exp_obj);
<a name="l00179"></a>00179 
<a name="l00186"></a>00186 <span class="keywordtype">void</span> <a class="code" href="helpers_8h.html#ad8e605812dfbf6163681d9bab9319865" title="Frees resources allocated by call to Cexplode() - does not free splitted pieces.">Cexplode_free_allButPieces</a>(<a class="code" href="structCexplodeStrings.html" title="Struct for Cexplode object.">CexplodeStrings</a> exp_obj);
<a name="l00187"></a>00187 
<a name="l00195"></a>00195 <span class="keywordtype">size_t</span> <a class="code" href="helpers_8h.html#a699fb49d95ecd0e6dd6f78154d31d4b9" title="Gets the amount of chars from the start of the original string to the beginning of...">Cexplode_getlentilllast</a>(<a class="code" href="structCexplodeStrings.html" title="Struct for Cexplode object.">CexplodeStrings</a> exp_obj);
<a name="l00196"></a>00196 
<a name="l00204"></a>00204 <span class="keywordtype">int</span> <a class="code" href="helpers_8h.html#ac2408bb0b5a263ba5b658c3e76bd8aae" title="returns 1 if last chars in original string were the separator - else returns 0">Cexplode_sepwasatend</a>(<a class="code" href="structCexplodeStrings.html" title="Struct for Cexplode object.">CexplodeStrings</a> exp_obj);
<a name="l00205"></a>00205 
<a name="l00214"></a>00214 <span class="keywordtype">int</span> <a class="code" href="helpers_8h.html#ac5f54fec027cf99f81ac4a3edcc455ba" title="Concatenates two exp_objs into one. Modifies the first argument to contain new exp_obj...">Cexplode_concat</a>(<a class="code" href="structCexplodeStrings.html" title="Struct for Cexplode object.">CexplodeStrings</a> *first,<a class="code" href="structCexplodeStrings.html" title="Struct for Cexplode object.">CexplodeStrings</a> *second);
<a name="l00215"></a>00215 
<a name="l00216"></a>00216 
<a name="l00221"></a>00221 <span class="keywordtype">int</span> <a class="code" href="helpers_8h.html#ab4c627dce0eaddfcd3d9d1b505a18713" title="removes trimchars from the beginning of a string.">mbot_ltrim</a>(<span class="keywordtype">char</span> *text, <span class="keywordtype">char</span> trimchar);
<a name="l00222"></a>00222 
<a name="l00227"></a>00227 <span class="keywordtype">int</span> <a class="code" href="helpers_8h.html#a9eed4d84ba25aac861d2f0e98ebea1c5" title="removes trailing trimchars from a string.">mbot_rtrim</a>(<span class="keywordtype">char</span> *text, <span class="keywordtype">char</span> trimchar);
<a name="l00228"></a>00228 
<a name="l00233"></a>00233 <span class="keywordtype">int</span> <a class="code" href="helpers_8h.html#ab752695ff718498402b26b700df6e47d" title="removes trailing trimchars as well as trimchars from the beginning of a string.">mbot_lrtrim</a>(<span class="keywordtype">char</span> *text, <span class="keywordtype">char</span> trimchar);
<a name="l00234"></a>00234 
<a name="l00239"></a>00239 <span class="keywordtype">int</span> <a class="code" href="helpers_8h.html#a03ca89b146a62235f864d1edf9a6c17a" title="removes all trimchars from a string.">mbot_trimall</a>(<span class="keywordtype">char</span> *text, <span class="keywordtype">char</span> trimchar);
<a name="l00240"></a>00240 
<a name="l00244"></a>00244 <a class="code" href="structMbotAtomic32.html" title="Struct for 32bit wide integer type used in atomic operations.">MbotAtomic32</a> * <a class="code" href="helpers_8h.html#a1b4ac4b4fdc05e131fe19317a7372f30" title="Creates 32bit atomic variable, compatible with mbot_atomic* operations.">MbotAtomic32Init</a>();
<a name="l00249"></a>00249 <span class="keywordtype">void</span> <a class="code" href="helpers_8h.html#a95db6f58cb65aa522628a12b050e30a4" title="Uninitializes MbotAtomic32. This must not be called when it is possible someone is...">MbotAtomic32Uninit</a>(<a class="code" href="structMbotAtomic32.html" title="Struct for 32bit wide integer type used in atomic operations.">MbotAtomic32</a> **_this_);
<a name="l00254"></a>00254 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="helpers_8h.html#a5a8246f0a9d2ecb397669fee0db5354a" title="Get the value atomically.">mbot_atomicGet</a>(<a class="code" href="structMbotAtomic32.html" title="Struct for 32bit wide integer type used in atomic operations.">MbotAtomic32</a>* atomic);
<a name="l00255"></a>00255 
<a name="l00260"></a>00260 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="helpers_8h.html#a7f3dbff0ae27bbe42ed27ca4667bc34c" title="Increase value atomically - returns value before increment.">mbot_atomicAdd</a>(<a class="code" href="structMbotAtomic32.html" title="Struct for 32bit wide integer type used in atomic operations.">MbotAtomic32</a>* atomic,<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> addition);
<a name="l00261"></a>00261 
<a name="l00266"></a>00266 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="helpers_8h.html#a82788623f2bcdb4ea8744bf6ed4627b2" title="Decrease value atomically - returns value before decrement.">mbot_atomicDec</a>(<a class="code" href="structMbotAtomic32.html" title="Struct for 32bit wide integer type used in atomic operations.">MbotAtomic32</a>* atomic,<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> decrement);
<a name="l00267"></a>00267 
<a name="l00272"></a>00272 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="helpers_8h.html#ac03b6050ac2b1ee4f6238a632169f77c" title="Decrease value atomically, if original value is greater than cmp. Returns original...">mbot_atomicDecIfGreater</a>(<a class="code" href="structMbotAtomic32.html" title="Struct for 32bit wide integer type used in atomic operations.">MbotAtomic32</a>* atomic,<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> decrement, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> cmp);
<a name="l00273"></a>00273 
<a name="l00278"></a>00278 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="helpers_8h.html#a4646872a8b03fd6ea4c2089199e1063d" title="Decrease value atomically, if original value is smaller than cmp. Returns original...">mbot_atomicDecIfSmaller</a>(<a class="code" href="structMbotAtomic32.html" title="Struct for 32bit wide integer type used in atomic operations.">MbotAtomic32</a>* atomic,<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> decrement, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> cmp);
<a name="l00279"></a>00279 
<a name="l00284"></a>00284 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="helpers_8h.html#a671ac1b259648d989ab1a029c28e2098" title="Increase value atomically, if original value is greater than cmp. Returns original...">mbot_atomicIncIfGreater</a>(<a class="code" href="structMbotAtomic32.html" title="Struct for 32bit wide integer type used in atomic operations.">MbotAtomic32</a>* atomic,<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> decrement, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> cmp);
<a name="l00285"></a>00285 
<a name="l00290"></a>00290 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="helpers_8h.html#ac7d98784c664e65af53c0b148f6d489d" title="Increase value atomically, if original value is smaller than cmp. Returns original...">mbot_atomicIncIfSmaller</a>(<a class="code" href="structMbotAtomic32.html" title="Struct for 32bit wide integer type used in atomic operations.">MbotAtomic32</a>* atomic,<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> decrement, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> cmp);
<a name="l00291"></a>00291 
<a name="l00292"></a>00292 <span class="preprocessor">#ifdef ARCH_x86</span>
<a name="l00293"></a>00293 <span class="preprocessor"></span>
<a name="l00297"></a>00297 __inline__ <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="helpers_8h.html#aeda3837358237de6a1eb3b85a65e0a31">mbot_atomicCAS</a>(<a class="code" href="structMbotAtomic32.html" title="Struct for 32bit wide integer type used in atomic operations.">MbotAtomic32</a>* atomic, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> old, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> newval)
<a name="l00298"></a>00298 {
<a name="l00299"></a>00299     __asm__ __volatile__(
<a name="l00300"></a>00300     <span class="stringliteral">&quot;lock cmpxchgl %w0,%1&quot;</span> <span class="comment">/* Swap value comp equals */</span>
<a name="l00301"></a>00301     : <span class="stringliteral">&quot;+r&quot;</span>(newval)
<a name="l00302"></a>00302     : <span class="stringliteral">&quot;m&quot;</span>(atomic-&gt;<a class="code" href="structMbotAtomic32.html#af20004ad939f9f9ec5987e2a0bb11525">value</a>), <span class="stringliteral">&quot;a&quot;</span>(old) <span class="comment">/* According to Intel&apos;s manual, comp value must be in EAX register */</span>
<a name="l00303"></a>00303     : <span class="stringliteral">&quot;memory&quot;</span>);
<a name="l00304"></a>00304 
<a name="l00305"></a>00305     <span class="keywordflow">return</span> old;
<a name="l00306"></a>00306 } <span class="comment">/* AaCpuAtomicCmpSwap32 */</span>
<a name="l00307"></a>00307 <span class="preprocessor">#else</span>
<a name="l00308"></a>00308 <span class="preprocessor"></span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="helpers_8h.html#aeda3837358237de6a1eb3b85a65e0a31">mbot_atomicCAS</a>(<a class="code" href="structMbotAtomic32.html" title="Struct for 32bit wide integer type used in atomic operations.">MbotAtomic32</a>* atomic, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> old, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> newval);
<a name="l00309"></a>00309 <span class="preprocessor">#endif</span>
<a name="l00310"></a>00310 <span class="preprocessor"></span>
<a name="l00311"></a>00311 <span class="comment">/* Containers */</span>
<a name="l00312"></a>00312 
<a name="l00313"></a><a class="code" href="structmbot__linkedList.html">00313</a> <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structmbot__linkedList.html">mbot_linkedList</a>
<a name="l00314"></a>00314 {
<a name="l00315"></a><a class="code" href="structmbot__linkedList.html#a9e31d23ae5b7b5e29b5c6bc8f6fa4857">00315</a>     <span class="keyword">struct </span><a class="code" href="structmbot__linkedList.html">mbot_linkedList</a> *<a class="code" href="structmbot__linkedList.html#a9e31d23ae5b7b5e29b5c6bc8f6fa4857">head</a>;
<a name="l00316"></a><a class="code" href="structmbot__linkedList.html#a9358b3eafe6c083bf3e12448a7d23b16">00316</a>     <span class="keyword">struct </span><a class="code" href="structmbot__linkedList.html">mbot_linkedList</a> *<a class="code" href="structmbot__linkedList.html#a9358b3eafe6c083bf3e12448a7d23b16">next</a>;
<a name="l00317"></a><a class="code" href="structmbot__linkedList.html#abfe2d8ac93d17e08ee7aa3aaf4e95dfe">00317</a>     <span class="keyword">struct </span><a class="code" href="structmbot__linkedList.html">mbot_linkedList</a> *<a class="code" href="structmbot__linkedList.html#abfe2d8ac93d17e08ee7aa3aaf4e95dfe">prev</a>;
<a name="l00318"></a><a class="code" href="structmbot__linkedList.html#a735984d41155bc1032e09bece8f8d66d">00318</a>     <span class="keywordtype">void</span> *<a class="code" href="structmbot__linkedList.html#a735984d41155bc1032e09bece8f8d66d">data</a>;
<a name="l00319"></a>00319 }<a class="code" href="structmbot__linkedList.html">mbot_linkedList</a>;
<a name="l00320"></a>00320 
<a name="l00324"></a>00324 <a class="code" href="structmbot__linkedList.html">mbot_linkedList</a> *<a class="code" href="helpers_8h.html#aaba224cf37291b1eda34e81b7cb20908" title="Initializes linked list for use - returns ptr to list head.">mbot_ll_init</a>();
<a name="l00328"></a>00328 <a class="code" href="structmbot__linkedList.html">mbot_linkedList</a> * <a class="code" href="helpers_8h.html#aff75d19cf19dd7b2f240d6b5db7ee9f1" title="Gets previous list item. - returns previous item, or NULL if error occurred/first...">mbot_ll_get_prev</a>(<a class="code" href="structmbot__linkedList.html">mbot_linkedList</a> *_this);
<a name="l00335"></a>00335 <a class="code" href="structmbot__linkedList.html">mbot_linkedList</a> * <a class="code" href="helpers_8h.html#a95294a003b1090373662c6078b7b7e1e" title="Get the head of the list Head can be used to maintain the location of empty list...">mbot_ll_head_get</a>(<a class="code" href="structmbot__linkedList.html">mbot_linkedList</a> *_this);
<a name="l00336"></a>00336 
<a name="l00340"></a>00340 <a class="code" href="structmbot__linkedList.html">mbot_linkedList</a> * <a class="code" href="helpers_8h.html#a1879101758161a8c84cb1328e139c48c" title="Get&amp;#39;s next element - NULL if error occurred, or last element was provided as...">mbot_ll_get_next</a>(<a class="code" href="structmbot__linkedList.html">mbot_linkedList</a> *_this);
<a name="l00341"></a>00341 
<a name="l00345"></a>00345 <a class="code" href="structmbot__linkedList.html">mbot_linkedList</a> * <a class="code" href="helpers_8h.html#a94dcac055f867e366648e84423a07a19" title="Get&amp;#39;s the first list element - returns first element or NULL if no elements stored...">mbot_ll_get_first</a>(<a class="code" href="structmbot__linkedList.html">mbot_linkedList</a> *_this);
<a name="l00346"></a>00346 
<a name="l00350"></a>00350 <a class="code" href="structmbot__linkedList.html">mbot_linkedList</a> * <a class="code" href="helpers_8h.html#a5f363fd2b3973f5fa633b69becc50fae" title="Gets the last element in list.">mbot_ll_get_last</a>(<a class="code" href="structmbot__linkedList.html">mbot_linkedList</a> *_this);
<a name="l00351"></a>00351 
<a name="l00356"></a>00356 <a class="code" href="structmbot__linkedList.html">mbot_linkedList</a> * <a class="code" href="helpers_8h.html#a769e3f1537a2deafaf1c2d5a5f54168e" title="Adds item to list (data). Does not do a copy of data. Any list item (including head)...">mbot_ll_add</a>(<a class="code" href="structmbot__linkedList.html">mbot_linkedList</a> *_this,<span class="keywordtype">void</span> *<a class="code" href="structmbot__linkedList.html#a735984d41155bc1032e09bece8f8d66d">data</a>);
<a name="l00357"></a>00357 
<a name="l00362"></a>00362 <a class="code" href="structmbot__linkedList.html">mbot_linkedList</a> * <a class="code" href="helpers_8h.html#aeb38ace1d40a50bcd134a3acac02a59f" title="removes given item from list - does not free memory.">mbot_ll_release</a>(<a class="code" href="structmbot__linkedList.html">mbot_linkedList</a> *_this);
<a name="l00363"></a>00363 
<a name="l00369"></a>00369 <a class="code" href="structmbot__linkedList.html">mbot_linkedList</a> * <a class="code" href="helpers_8h.html#a138c3d10e29df5cd4c297968b4060a3f" title="removes list item which holds data pointed by data. Any list item can be given in...">mbot_ll_safe_release</a>(<a class="code" href="structmbot__linkedList.html">mbot_linkedList</a> *_this,<span class="keywordtype">void</span> *<a class="code" href="structmbot__linkedList.html#a735984d41155bc1032e09bece8f8d66d">data</a>);
<a name="l00370"></a>00370 
<a name="l00374"></a>00374 <span class="keywordtype">void</span> * <a class="code" href="helpers_8h.html#a00376130aa19ea61cfaba96d7d4846f1" title="Gets data stored to an entry - entry and data are left untouched.">mbot_ll_dataGet</a>(<a class="code" href="structmbot__linkedList.html">mbot_linkedList</a> *_this);
<a name="l00380"></a>00380 <span class="keywordtype">void</span> * <a class="code" href="helpers_8h.html#a92753b0d798628f305538fc6cb336c6d" title="Sets data to an list,.">mbot_ll_dataSet</a>(<a class="code" href="structmbot__linkedList.html">mbot_linkedList</a> *_this,<span class="keywordtype">void</span> *<a class="code" href="structmbot__linkedList.html#a735984d41155bc1032e09bece8f8d66d">data</a>);
<a name="l00381"></a>00381 
<a name="l00386"></a>00386 <a class="code" href="structmbot__linkedList.html">mbot_linkedList</a> * <a class="code" href="helpers_8h.html#a7c6856a86bfde414b76a317bf94f6a9f" title="Searchs through the list and returns element in which the held data matches data...">mbot_ll_seek</a>(<a class="code" href="structmbot__linkedList.html">mbot_linkedList</a> *_this, <span class="keywordtype">void</span> *<a class="code" href="structmbot__linkedList.html#a735984d41155bc1032e09bece8f8d66d">data</a>, <span class="keywordtype">size_t</span> datasize);
<a name="l00387"></a>00387 
<a name="l00394"></a>00394 <a class="code" href="structmbot__linkedList.html">mbot_linkedList</a> *<a class="code" href="helpers_8h.html#a1837ee000be4ff885fabb90fbab82341" title="Copies given list and itemsize bytes of data from each container to new list, and...">mbot_ll_copylist_wdata</a>(<a class="code" href="structmbot__linkedList.html">mbot_linkedList</a> *old,<span class="keywordtype">size_t</span> itemsize);
<a name="l00395"></a>00395 
<a name="l00399"></a>00399 <span class="keywordtype">void</span>  <a class="code" href="helpers_8h.html#a6ae40d44caf944ad6b34f1a84dfa1f51" title="Frees all entries from list, and destroys the list - does not free stored data. _this...">mbot_ll_destroy</a>(<a class="code" href="structmbot__linkedList.html">mbot_linkedList</a> **_this);
<a name="l00400"></a>00400 <span class="preprocessor">#endif</span>
</pre></div></div>
<br />
<br />
<p>
<a href="http://teotilcan.net/svn/MazBot/generic/src/">Most recent version</a><br /><a href="http://teotilcan.net/tracker/view_all_bug_page.php">Bug tracker</a><br /><a href="http://maz-programmersdiary.blogspot.com/">Maz - programmer's diary</a><br /><i>Contact: Mazziesaccount@gmail.com</i>
</body>
</html>
